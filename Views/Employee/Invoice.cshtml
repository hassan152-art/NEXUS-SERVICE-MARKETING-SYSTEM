@model Bill
@{
    Layout = null;   // 🔹 Print ke liye layout off
}

<!DOCTYPE html>
<html>
<head>
    <title>Invoice #@Model.BillId</title>
    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" />
    <style>
        body {
            font-size: 14px;
        }

        .invoice-box {
            padding: 30px;
        }

        .invoice-title {
            font-size: 28px;
            font-weight: bold;
        }

        .table th {
            background: #f2f2f2;
        }
        /* media print {
            .no-print {
                display: none;
            }
        } */
    </style>
</head>
<body>

    <div class="container invoice-box">

        <!-- 🔹 Header -->
        <div class="row mb-4">
            <div class="col-6">
                <div class="invoice-title">🧾 INVOICE</div>
                <p>
                    <strong>Nexus Service Marketing</strong><br />
                    Internet & Telecom Services
                </p>
            </div>
            <div class="col-6 text-end">
                <p>
                    <strong>Invoice #:</strong> @Model.BillId<br />
                    <strong>Date:</strong> @Model.BillDate.ToShortDateString()<br />
                    <strong>Due Date:</strong> @Model.DueDate.ToShortDateString()
                </p>
            </div>
        </div>

        <!-- 🔹 Customer Info -->
        <div class="row mb-4">
            <div class="col-6">
                <h6>BILL TO</h6>
                <p>
                    <strong>@Model.Order.Customer.FullName</strong><br />
                    Phone: @Model.Order.Customer.ContactNo<br />
                    Email: @Model.Order.Customer.Email
                </p>
            </div>
            <div class="col-6 text-end">
                <h6>STATUS</h6>
                @if (Model.IsPaid)
                {
                    <span class="badge bg-success">PAID</span>
                }
                else
                {
                    <span class="badge bg-danger">UNPAID</span>
                }
            </div>
        </div>

        <!-- 🔹 Charges -->
        <table class="table table-bordered">
            <thead>
                <tr>
                    <th>Description</th>
                    <th class="text-end">Amount</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Plan Charges (@Model.Order.Plan.PlanName)</td>
                    <td class="text-end">@Model.PlanAmount</td>
                </tr>

                <tr>
                    <td>Discount</td>
                    <td class="text-end text-danger">- @Model.DiscountAmount</td>
                </tr>

                <tr>
                    <td>Tax (@Model.TaxPercentage %)</td>
                    <td class="text-end">@Model.TaxAmount</td>
                </tr>

                <tr>
                    <th>Total Amount</th>
                    <th class="text-end">@Model.Amount</th>
                </tr>
            </tbody>
        </table>

        <!-- 🔹 Payments -->
        <h6>Payment History</h6>
        <table class="table table-sm table-bordered">
            <thead>
                <tr>
                    <th>Date</th>
                    <th>Method</th>
                    <th class="text-end">Paid Amount</th>
                </tr>
            </thead>
            <tbody>
                @if (Model.Payments.Any())
                {
                    foreach (var p in Model.Payments)
                    {
                        <tr>
                            <td>@p.PaymentDate.ToShortDateString()</td>
                            <td>@p.PaymentMethod</td>
                            <td class="text-end">@p.PaidAmount</td>
                        </tr>
                    }
                }
                else
                {
                    <tr>
                        <td colspan="3" class="text-center text-muted">
                            No payments recorded
                        </td>
                    </tr>
                }
            </tbody>
        </table>

        <!-- 🔹 Footer -->
        <div class="row mt-4">
            <div class="col-6">
                <p>
                    <strong>Generated By:</strong> @Model.GeneratedBy
                </p>
            </div>
            <div class="col-6 text-end">
                <button onclick="window.print()" class="btn btn-primary no-print">
                    🖨 Print Invoice
                </button>
            </div>
        </div>

    </div>

</body>
</html>

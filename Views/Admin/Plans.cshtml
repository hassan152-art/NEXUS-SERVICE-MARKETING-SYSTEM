@model List<Plan>
@{
    Layout = "~/Views/Shared/_Admin_Layout.cshtml";
    ViewData["Title"] = "Service Plans";
}

<style>
    /* Main Card Container */
    .plan-card {
        background: #ffffff;
        border-radius: 12px;
        border: 1px solid #e0e0e0;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.03);
        margin-top: 20px;
    }

    /* Header Styling */
    .card-header-flex {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 20px 25px;
        border-bottom: 1px solid #f1f1f1;
    }

    /* Table Design */
    .table thead th {
        background-color: #f8f9fa;
        color: #5f6368;
        font-weight: 600;
        text-transform: uppercase;
        font-size: 0.75rem;
        letter-spacing: 0.8px;
        padding: 15px 25px;
        border: none;
    }

    .table tbody td {
        padding: 18px 25px;
        vertical-align: middle;
        color: #333;
        border-bottom: 1px solid #f8f9fa;
    }

    /* Plan Connection Icons */
    .conn-icon {
        width: 38px;
        height: 38px;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        border-radius: 8px;
        margin-right: 12px;
        font-size: 1.1rem;
    }

    .icon-internet {
        background: #e3f2fd;
        color: #1976d2;
    }

    .icon-telephone {
        background: #f3e5f5;
        color: #7b1fa2;
    }

    /* Price & Validity Tags */
    .price-tag {
        font-weight: 700;
        color: #d32f2f;
        font-size: 1.1rem;
    }

    .validity-badge {
        background: #fff8e1;
        color: #f57f17;
        padding: 4px 10px;
        border-radius: 50px;
        font-size: 0.8rem;
        font-weight: 600;
        border: 1px solid #ffecb3;
    }

    /* Speed Badge */
    .speed-badge {
        background: #e8f5e9;
        color: #2e7d32;
        padding: 4px 10px;
        border-radius: 6px;
        font-weight: 500;
        font-size: 0.85rem;
    }

    /* Action Buttons */
    .btn-action {
        width: 35px;
        height: 35px;
        border-radius: 8px;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        transition: 0.2s;
        border: 1px solid #eee;
        background: white;
    }

    .btn-edit {
        color: #f39c12;
    }

        .btn-edit:hover {
            background: #f39c12;
            color: white;
            border-color: #f39c12;
        }

    .btn-delete {
        color: #d32f2f;
    }

        .btn-delete:hover {
            background: #d32f2f;
            color: white;
            border-color: #d32f2f;
        }
</style>

<div class="container-fluid">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <div>
            <h3 class="fw-bold mb-0">Internet & Telephone Plans</h3>
            <p class="text-muted small mb-0">Define and manage your subscription packages</p>
        </div>
        <a href="/Admin/AddPlan" class="btn btn-red px-4">
            <i class="fa-solid fa-plus-circle me-2"></i> Create New Plan
        </a>
    </div>

    <div class="plan-card">
        <div class="card-header-flex">
            <h5 class="mb-0 fw-bold text-secondary">Active Service Plans</h5>
            <div class="d-flex gap-2">
                <span class="badge bg-light text-dark border p-2 px-3 fw-normal">Total Plans: @Model.Count</span>
            </div>
        </div>

        <div class="table-responsive">
            <table class="table table-hover mb-0">
                <thead>
                    <tr>
                        <th>Connection Type</th>
                        <th>Plan Name</th>
                        <th>Speed / Capacity</th>
                        <th>Pricing</th>
                        <th>Validity</th>
                        <th class="text-end">Actions</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var p in Model)
                    {
                        <tr>
                            <td>
                                <div class="d-flex align-items-center">
                                    @if (p.ConnectionType.ToLower().Contains("internet"))
                                    {
                                        <div class="conn-icon icon-internet"><i class="fa-solid fa-wifi"></i></div>
                                    }
                                    else
                                    {
                                        <div class="conn-icon icon-telephone"><i class="fa-solid fa-phone-volume"></i></div>
                                    }
                                    <span class="fw-bold">@p.ConnectionType</span>
                                </div>
                            </td>
                            <td class="text-secondary fw-semibold">@p.PlanName</td>
                            <td>
                                <span class="speed-badge">
                                    <i class="fa-solid fa-bolt-lightning me-1"></i> @p.SpeedOrType
                                </span>
                            </td>
                            <td>
                                <span class="price-tag">₹@p.Charges</span>
                            </td>
                            <td>
                                <span class="validity-badge">
                                    <i class="fa-regular fa-calendar-check me-1"></i> @p.ValidityMonths Months
                                </span>
                            </td>
                            <td class="text-end">
                                <a href="/Admin/EditPlan/@p.PlanId" class="btn-action btn-edit" title="Modify Plan">
                                    <i class="fa-solid fa-pen-nib"></i>
                                </a>
                                <a href="/Admin/DeletePlan/@p.PlanId"
                                   class="btn-action btn-delete"
                                   onclick="return confirm('Archive this plan?')">
                                    <i class="fa-solid fa-trash-can"></i>
                                </a>
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    </div>
</div>
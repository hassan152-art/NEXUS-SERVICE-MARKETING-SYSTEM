@model Order

<div style="min-height: 100vh; padding: 130px 15px; background-color: #f8f9fa; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;">

    <div style="max-width: 900px; margin: 0 auto; text-align: center; margin-bottom: 45px;">
        <h1 style="color: #1a237e; font-weight: 800; margin: 0; font-size: 2.5rem;">NEXUSE<span style="color: #d32f2f;">.net</span></h1>
        <p style="color: #666; font-weight: 500; text-transform: uppercase; letter-spacing: 2px; margin-top: 5px;">Service Customization Portal</p>
    </div>

    <form asp-action="OrderPlace" method="post" id="orderForm">
        <input type="hidden" asp-for="ConnectionType" id="selectedConnectionType" required />
        <input type="hidden" asp-for="PlanId" id="selectedPlanId" required />

        <div style="max-width: 1000px; margin: 0 auto;">
            <div style="display: flex; align-items: center; margin-bottom: 25px;">
                <div style="background: #d32f2f; color: white; width: 30px; height: 30px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; margin-right: 15px;">1</div>
                <h3 style="color: #1a237e; margin: 0; text-transform: uppercase; letter-spacing: 1px;">Select Connection Technology</h3>
            </div>

            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 25px; margin-bottom: 50px;">

                <div onclick="selectConnection('Dialup', this)" class="conn-card"
                     style="background: white; padding: 30px; border-radius: 12px; border: 2px solid #e0e0e0; cursor: pointer; transition: all 0.3s ease; position: relative;">
                    <h3 style="margin: 0 0 10px 0; color: #1a237e; font-size: 1.2rem;">DIALUP</h3>
                    <p style="color: #777; font-size: 14px; line-height: 1.5; margin: 0;">Traditional narrowband access using standard telephone lines. Ideal for basic low-bandwidth tasks.</p>
                </div>

                <div onclick="selectConnection('Broadband', this)" class="conn-card"
                     style="background: white; padding: 30px; border-radius: 12px; border: 2px solid #e0e0e0; cursor: pointer; transition: all 0.3s ease;">
                    <h3 style="margin: 0 0 10px 0; color: #1a237e; font-size: 1.2rem;">BROADBAND</h3>
                    <p style="color: #777; font-size: 14px; line-height: 1.5; margin: 0;">High-speed data transmission for seamless streaming, gaming, and heavy downloads.</p>
                </div>

                <div onclick="selectConnection('Telephone', this)" class="conn-card"
                     style="background: white; padding: 30px; border-radius: 12px; border: 2px solid #e0e0e0; cursor: pointer; transition: all 0.3s ease;">
                    <h3 style="margin: 0 0 10px 0; color: #1a237e; font-size: 1.2rem;">TELEPHONE</h3>
                    <p style="color: #777; font-size: 14px; line-height: 1.5; margin: 0;">Dedicated voice communication lines with crystal clear audio quality and 24/7 reliability.</p>
                </div>
            </div>

            <div id="planHeader" style="display: none; align-items: center; margin-bottom: 25px;">
                <div style="background: #1a237e; color: white; width: 30px; height: 30px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; margin-right: 15px;">2</div>
                <h3 style="color: #1a237e; margin: 0; text-transform: uppercase; letter-spacing: 1px;">Choose Your Service Plan</h3>
            </div>

            <div id="plansContainer" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 25px; margin-bottom: 50px;">
                @foreach (var p in ViewBag.Plans)
                {
                    <div onclick="selectPlan('@p.PlanId', this)" class="plan-card" data-type="@p.ConnectionType"
                         style="display: none; background: white; padding: 35px; border-radius: 15px; border: 2px solid #e0e0e0; cursor: pointer; transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); position: relative; overflow: hidden;">

                        <div style="color: #d32f2f; font-weight: 800; font-size: 0.75rem; text-transform: uppercase; margin-bottom: 10px;">@p.ConnectionType Package</div>
                        <h3 style="color: #1a237e; margin: 0 0 15px 0; font-size: 1.4rem; border-bottom: 1px solid #f1f1f1; padding-bottom: 10px;">@p.PlanName</h3>

                        <ul style="padding: 0; list-style: none; color: #555; font-size: 14px; line-height: 2;">
                            <li>✅ High Priority Support</li>
                            <li>✅ Unlimited Local Data</li>
                            <li>✅ Free Technical Installation</li>
                        </ul>

                        <div style="margin-top: 20px; font-weight: 700; color: #1a237e; text-align: right; text-transform: uppercase; font-size: 0.85rem;">
                            Click to Select →
                        </div>
                    </div>
                }
            </div>

            <div style="text-align: center; background: white; padding: 40px; border-radius: 15px; box-shadow: 0 -5px 20px rgba(0,0,0,0.03);">
                <button type="submit" id="submitBtn" disabled
                        style="padding: 20px 80px; background-color: #e0e0e0; color: #999; border: none; border-radius: 8px; font-size: 18px; font-weight: 800; cursor: not-allowed; transition: all 0.3s ease; text-transform: uppercase; letter-spacing: 2px;">
                    Place Order Now
                </button>
                <p id="hintText" style="margin-top: 15px; color: #999; font-size: 14px;">Please select a connection type and plan to proceed.</p>
            </div>
        </div>
    </form>
</div>

<style>
    .conn-card:hover, .plan-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 25px rgba(0,0,0,0.08);
        border-color: #1a237e !important;
    }
</style>

<script>
    function selectConnection(type, element) {
        // Update Hidden Input
        document.getElementById('selectedConnectionType').value = type;

        // Visual Reset for Connection Cards
        document.querySelectorAll('.conn-card').forEach(card => {
            card.style.borderColor = '#e0e0e0';
            card.style.background = 'white';
        });

        // Visual Selection
        element.style.borderColor = '#d32f2f';
        element.style.background = '#fffafa';

        // Show Plan Header and Filter Plans
        document.getElementById('planHeader').style.display = 'flex';
        const plans = document.querySelectorAll('.plan-card');

        plans.forEach(plan => {
            if (plan.getAttribute('data-type') === type) {
                plan.style.display = 'block';
            } else {
                plan.style.display = 'none';
                plan.style.borderColor = '#e0e0e0';
            }
        });

        // Reset selected plan when connection type changes
        document.getElementById('selectedPlanId').value = "";
        checkValidation();
    }

    function selectPlan(id, element) {
        document.getElementById('selectedPlanId').value = id;

        // Visual Reset for Plan Cards
        document.querySelectorAll('.plan-card').forEach(card => {
            card.style.borderColor = '#e0e0e0';
            card.style.background = 'white';
        });

        // Visual Selection
        element.style.borderColor = '#1a237e';
        element.style.background = '#f0f2ff';

        checkValidation();
    }

    function checkValidation() {
        const conn = document.getElementById('selectedConnectionType').value;
        const plan = document.getElementById('selectedPlanId').value;
        const btn = document.getElementById('submitBtn');
        const hint = document.getElementById('hintText');

        if (conn && plan) {
            btn.disabled = false;
            btn.style.backgroundColor = '#d32f2f';
            btn.style.color = 'white';
            btn.style.cursor = 'pointer';
            btn.style.boxShadow = '0 8px 20px rgba(211,47,47,0.3)';
            hint.style.color = '#2e7d32';
            hint.innerHTML = '✔ Everything looks good! You can now place your order.';
        } else {
            btn.disabled = true;
            btn.style.backgroundColor = '#e0e0e0';
            btn.style.color = '#999';
            btn.style.cursor = 'not-allowed';
            btn.style.boxShadow = 'none';
        }
    }
</script>